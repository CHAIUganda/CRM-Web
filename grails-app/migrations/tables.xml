<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">
    <changeSet author="victor (generated)" id="1407779377483-1">
        <createTable tableName="audit_log">
            <column autoIncrement="true" name="id" type="bigint">
                <constraints nullable="false" primaryKey="true" primaryKeyName="audit_logPK"/>
            </column>
            <column name="actor" type="varchar(255)"/>
            <column name="class_name" type="varchar(255)"/>
            <column name="date_created" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="event_name" type="varchar(255)"/>
            <column name="last_updated" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="new_value" type="varchar(255)"/>
            <column name="old_value" type="varchar(255)"/>
            <column name="persisted_object_id" type="varchar(255)"/>
            <column name="persisted_object_version" type="bigint"/>
            <column name="property_name" type="varchar(255)"/>
            <column name="uri" type="varchar(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="victor (generated)" id="1407779377483-2">
        <createTable tableName="district">
            <column name="id" type="varchar(32)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="districtPK"/>
            </column>
            <column name="date_created" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="last_updated" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="victor (generated)" id="1407779377483-3">
        <createTable tableName="parish">
            <column name="id" type="varchar(32)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="parishPK"/>
            </column>
            <column name="date_created" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="last_updated" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="subcounty_id" type="varchar(32)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="victor (generated)" id="1407779377483-4">
        <createTable tableName="registration_code">
            <column autoIncrement="true" name="id" type="bigint">
                <constraints nullable="false" primaryKey="true" primaryKeyName="registration_PK"/>
            </column>
            <column name="date_created" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="token" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="username" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="victor (generated)" id="1407779377483-5">
        <createTable tableName="request_map">
            <column name="id" type="varchar(32)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="request_mapPK"/>
            </column>
            <column name="config_attribute" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="http_method" type="varchar(255)"/>
            <column name="url" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="victor (generated)" id="1407779377483-6">
        <createTable tableName="role">
            <column name="id" type="varchar(32)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="rolePK"/>
            </column>
            <column name="authority" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="date_created" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="last_updated" type="datetime">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="victor (generated)" id="1407779377483-7">
        <createTable tableName="sub_county">
            <column name="id" type="varchar(32)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="sub_countyPK"/>
            </column>
            <column name="date_created" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="district_id" type="varchar(32)">
                <constraints nullable="false"/>
            </column>
            <column name="last_updated" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="victor (generated)" id="1407779377483-8">
        <createTable tableName="user">
            <column name="id" type="varchar(32)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="userPK"/>
            </column>
            <column name="account_expired" type="bit">
                <constraints nullable="false"/>
            </column>
            <column name="account_locked" type="bit">
                <constraints nullable="false"/>
            </column>
            <column name="date_created" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="enabled" type="bit">
                <constraints nullable="false"/>
            </column>
            <column name="last_updated" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="password" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="password_expired" type="bit">
                <constraints nullable="false"/>
            </column>
            <column name="username" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="victor (generated)" id="1407779377483-9">
        <createTable tableName="user_role">
            <column name="id" type="varchar(32)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="user_rolePK"/>
            </column>
            <column name="date_created" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="last_updated" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="role_id" type="varchar(32)">
                <constraints nullable="false"/>
            </column>
            <column name="user_id" type="varchar(32)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="victor (generated)" id="1407779377483-14">
        <createIndex indexName="FKC4AB183D8D29E031" tableName="parish">
            <column name="subcounty_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="victor (generated)" id="1407779377483-15">
        <createIndex indexName="unique_url" tableName="request_map" unique="true">
            <column name="http_method"/>
            <column name="url"/>
        </createIndex>
    </changeSet>
    <changeSet author="victor (generated)" id="1407779377483-16">
        <createIndex indexName="authority_uniq_1407779377345" tableName="role" unique="true">
            <column name="authority"/>
        </createIndex>
    </changeSet>
    <changeSet author="victor (generated)" id="1407779377483-17">
        <createIndex indexName="FK952A882943314983" tableName="sub_county">
            <column name="district_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="victor (generated)" id="1407779377483-18">
        <createIndex indexName="username_uniq_1407779377354" tableName="user" unique="true">
            <column name="username"/>
        </createIndex>
    </changeSet>
    <changeSet author="victor (generated)" id="1407779377483-19">
        <createIndex indexName="FK143BF46A106BED03" tableName="user_role">
            <column name="role_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="victor (generated)" id="1407779377483-20">
        <createIndex indexName="FK143BF46AB596B0E3" tableName="user_role">
            <column name="user_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="victor (generated)" id="1407779377483-21">
        <createIndex indexName="unique_user_id" tableName="user_role" unique="true">
            <column name="role_id"/>
            <column name="user_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="victor (generated)" id="1407779377483-10">
        <addForeignKeyConstraint baseColumnNames="subcounty_id" baseTableName="parish" constraintName="FKC4AB183D8D29E031" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="sub_county" referencesUniqueColumn="false"/>
    </changeSet>
    <changeSet author="victor (generated)" id="1407779377483-11">
        <addForeignKeyConstraint baseColumnNames="district_id" baseTableName="sub_county" constraintName="FK952A882943314983" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="district" referencesUniqueColumn="false"/>
    </changeSet>
    <changeSet author="victor (generated)" id="1407779377483-12">
        <addForeignKeyConstraint baseColumnNames="role_id" baseTableName="user_role" constraintName="FK143BF46A106BED03" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="role" referencesUniqueColumn="false"/>
    </changeSet>
    <changeSet author="victor (generated)" id="1407779377483-13">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="user_role" constraintName="FK143BF46AB596B0E3" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="user" referencesUniqueColumn="false"/>
    </changeSet>
</databaseChangeLog>